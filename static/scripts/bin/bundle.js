!function(){var e=["ngAnimate","ngAria","ngCookies","ngMaterial","ngRoute"];angular.module("app",e)}(),function(){function e(e,t){this.cadastrar=function(t){return e.post("/autenticacao/cadastrar",t).then(function(e){return Promise.resolve(e.data)})},this.autenticar=function(t,o){return e.post("/autenticacao",{email:t,senha:o}).then(function(e){return Promise.resolve(e.data)})}}angular.module("app").service("AutenticacaoService",e),e.$inject=["$http","$cookies"]}(),function(){function e(e){this.getAll=function(){return e.get("/categoria").then(function(e){return e.data})}}angular.module("app").service("CategoriaProdutoService",e),e.$inject=["$http"]}(),function(){function e(e){this.getAvailable=function(){return e.get("/perfil/disponivel").then(function(e){return e.data})}}angular.module("app").service("PerfilService",e),e.$inject=["$http"]}(),function(){function e(e){this.getSessionItem=function(t){return"sessionStorage"in window?sessionStorage.getItem(t):e.get(t)},this.setSessionItem=function(t,o){if("string"!=typeof t||"object"==typeof o)throw new TypeError("Params must not be complex structures");return"sessionStorage"in window?sessionStorage.setItem(t,o):e.put(t,o)},this.removeSessionItem=function(t){return"sessionStorage"in window?sessionStorage.removeItem(t):e.remove(t)},this.clearSessionItems=function(){return"sessionStorage"in window&&sessionStorage.clear()},this.getPreference=function(t){return"localStorage"in window?localStorage.getItem(t):e.get(t)},this.setPreference=function(t,o){if("string"!=typeof t||"object"==typeof o)throw new TypeError("Params must not be complex structures");return"localStorage"in window?localStorage.setItem(t,o):e.put(t,o,{expires:new Date(2021,11,31)})},this.removePreference=function(t){return"localStorage"in window?localStorage.removeItem(t):e.remove(t)}}angular.module("app").service("PersistenceService",e),e.$inject=["$cookies"]}(),function(){function e(e){this.listarTodos=function(){return e.get("/produto").then(function(e){return Promise.resolve(e.data)})}}angular.module("app").service("ProdutoService",e),e.$inject=["$http"]}(),function(){function e(e){this.register=function(t){return e.post("/usuario/novo",t).then(function(e){return e.data})}}angular.module("app").service("UsuarioService",e),e.$inject=["$http"]}(),function(){function e(e,t){this.listarMeusProdutos=function(){return e.get("/oferta/meus-produtos").then(function(e){return Promise.resolve(e.data)})},this.cadastrarOferta=function(t){return e.post("/oferta",t).then(function(e){return Promise.resolve(e.data)})},this.deletarOferta=function(t){return e.delete("/oferta/"+t).then(function(e){return Promise.resolve(e.data)})}}e.$inject=["$http","PersistenceService"],angular.module("app").service("UsuarioProdutoService",e)}(),function(){function e(e,t,o,r){e.view.name="Busca",this.categories=t.data,this.handlings=o.data,this.products=r.data,this.viewState="filter",this.resultViewState="list",this.setViewState=function(e){this.viewState=e},this.setResultViewState=function(e){this.resultViewState=e}}angular.module("app").controller("SearchController",e),e.$inject=["$rootScope","categories","handlings","products"]}(),function(){function e(e,t,o,r,i,n){this.estados=[{nome:"Acre",sigla:"AC"},{nome:"Alagoas",sigla:"AL"},{nome:"Amapá",sigla:"AP"},{nome:"Amazonas",sigla:"AM"},{nome:"Bahia ",sigla:"BA"},{nome:"Ceará",sigla:"CE"},{nome:"Distrito Federal ",sigla:"DF"},{nome:"Espírito Santo",sigla:"ES"},{nome:"Goiás",sigla:"GO"},{nome:"Maranhão",sigla:"MA"},{nome:"Mato Grosso",sigla:"MT"},{nome:"Mato Grosso do Sul",sigla:"MS"},{nome:"Minas Gerais",sigla:"MG"},{nome:"Pará",sigla:"PA"},{nome:"Paraíba",sigla:"PB"},{nome:"Paraná",sigla:"PR"},{nome:"Pernambuco",sigla:"PE"},{nome:"Piauí",sigla:"PI"},{nome:"Rio de Janeiro",sigla:"RJ"},{nome:"Rio Grande do Norte",sigla:"RN"},{nome:"Rio Grande do Sul",sigla:"RS"},{nome:"Rondônia",sigla:"RO"},{nome:"Roraima",sigla:"RR"},{nome:"Santa Catarina",sigla:"SC"},{nome:"São Paulo",sigla:"SP"},{nome:"Sergipe",sigla:"SE"},{nome:"Tocantins",sigla:"TO"}],this.usuario=JSON.parse(i.getSessionItem("usuario"))||this.$location.url("/registro/perfil"),this.endereco=JSON.parse(i.getSessionItem("endereco"))||{cep:"",logradouro:"",numero:null,complemento:"",bairro:"",cidade:"",estado:""},this.telefone=JSON.parse(i.getSessionItem("telefone"))||{Tipo:null,ddd:null,numero:null},this.cepPattern=/\d{8}/,this.dddPattern=/\d{2}/,this.telPattern=/(\d{8}|\d{9})/,this.voltar=function(){return"PF"===this.usuario.tipo?t.url("/registro/pessoa-fisica"):t.url("/registro/pessoa-juridica")},this.avancar=function(){return i.setSessionItem("endereco",JSON.stringify(this.endereco)),i.setSessionItem("telefone",JSON.stringify(this.telefone)),r.show({contentElement:document.getElementById("terms_of_use_dialog"),parent:document.getElementsByTagName("body")[0]})},this.cadastrar=function(){JSON.parse(i.getSessionItem("credencial"));var e=JSON.parse(i.getSessionItem("pessoa_fisica")),r=JSON.parse(i.getSessionItem("pessoa_juridica")),a=JSON.parse(i.getSessionItem("email")),s=this.endereco,u=this.telefone,c=this.usuario;return c.Emails=[a],c.Enderecos=[s],c.Telefones=[u],"PF"===this.usuario.tipo?(e.data_nascimento=new Date(e.data_nascimento).toISOString().split("T")[0],c.PessoaFisica=e):(r.data_fundacao=new Date(r.data_fundacao).toISOString().split("T")[0],c.PessoaJuridica=r),n.cadastrar(c).then(function(e){return n.autenticar(a.email,c.senha)}).then(function(e){return o.put("session",e.token),t.url("/meus-produtos")})},this.cancelar=function(){return r.hide()}}angular.module("app").controller("CadastroContatoController",e),e.$inject=["$rootScope","$location","$cookies","$mdDialog","PersistenceService","AutenticacaoService"]}(),function(){function e(e,t,o){this.usuario=JSON.parse(o.getSessionItem("usuario"))||t.url("/registro/perfil"),this.email=JSON.parse(o.getSessionItem("email"))||{email:""},this.voltar=function(){return t.url("/registro/perfil")},this.avancar=function(e){return o.setSessionItem("usuario",JSON.stringify(this.usuario)),o.setSessionItem("email",JSON.stringify(this.email)),t.url("/registro/"+e)}}angular.module("app").controller("CadastroCredencialController",e),e.$inject=["$rootScope","$location","PersistenceService"]}(),function(){function e(e,t,o){this.usuario=JSON.parse(o.getSessionItem("usuario"))||{tipo:"",senha:"",Perfil:null},this.voltar=function(){return o.clearSessionItems(),t.url("/")},this.avancar=function(){return o.setSessionItem("usuario",JSON.stringify(this.usuario)),t.url("/registro/credencial")}}angular.module("app").controller("CadastroPerfilController",e),e.$inject=["$rootScope","$location","PersistenceService"]}(),function(){function e(e,t,o){this.usuario=JSON.parse(o.getSessionItem("usuario"))||t.url("/registro/perfil"),this.pessoa_fisica=JSON.parse(o.getSessionItem("pessoa_fisica"))||{cpf:"",rg:"",nome:"",sobrenome:"",data_nascimento:new Date("1988-00-01")},this.data_nascimento=new Date(this.pessoa_fisica.data_nascimento),this.cpfPattern=/\d{11}/,this.voltar=function(){return t.url("/registro/credencial")},this.avancar=function(){return this.pessoa_fisica.data_nascimento=this.data_nascimento.toISOString(),o.removeSessionItem("pessoa_juridica"),o.setSessionItem("pessoa_fisica",JSON.stringify(this.pessoa_fisica)),t.url("/registro/contato")}}angular.module("app").controller("CadastroPessoaFisicaController",e),e.$inject=["$rootScope","$location","PersistenceService"]}(),function(){function e(e,t,o){this.usuario=JSON.parse(o.getSessionItem("usuario"))||t.url("/registro/perfil"),this.pessoa_juridica=JSON.parse(o.getSessionItem("pessoa_juridica"))||{cnpj:"",razao_social:"",responsavel:"",data_fundacao:new Date("1991-00-01")},this.data_fundacao=new Date(this.pessoa_juridica.data_fundacao),this.cnpjPattern=/\d{14}/,this.voltar=function(){return t.url("/registro/credencial")},this.avancar=function(){return this.pessoa_juridica.data_fundacao=this.data_fundacao.toISOString(),o.removeSessionItem("pessoa_fisica"),o.setSessionItem("pessoa_juridica",JSON.stringify(this.pessoa_juridica)),t.url("/registro/contato")}}angular.module("app").controller("CadastroPessoaJuridicaController",e),e.$inject=["$rootScope","$location","PersistenceService"]}(),function(){function e(e,t,o,r,i){this.email="",this.senha="",this.login=function(){r.autenticar(this.email,this.senha).then(function(e){return o.put("session",e.token),t.url("/meus-produtos")}).catch(function(e){console.log(e)})}}angular.module("app").controller("InicioController",e),e.$inject=["$rootScope","$location","$cookies","AutenticacaoService","PersistenceService"]}(),function(){function e(e,t,o,r,i,n,a){this.oferta={},this.ofertas=a,this.produtosDisponiveis=n,this.categoria=null,this.textoBusca="",this.mensagemStatus="Nenhum produto encontrado.",this.abrirFormulario=function(e){e?(this.oferta=angular.copy(e),this.categoria=e.Anuncio.Categoria,this.oferta.data_inicio=new Date(this.oferta.data_inicio),this.oferta.data_fim=new Date(this.oferta.data_fim)):(this.oferta={},this.categoria=null),t.show({contentElement:document.getElementById("produto_form"),parent:document.getElementsByTagName("body")[0]})},this.produtosFiltrados=function(e){return e?this.produtosDisponiveis.filter(function(t){return t.Categoria===e}):[{id:null,nome:"Selecione uma categoria"}]},this.cancelar=function(){return this.produto={},t.hide()},this.salvar=function(){var e=this;return this.ofertas=[],i.cadastrarOferta(this.oferta).then(function(o){t.hide(),e.listarMeusProdutos()})},this.produtosPorCategoria=function(e){return this.produtosDisponiveis.filter(function(t){return t.Categoria===e})},this.getFormatedDate=function(e){var t=new Date(e),o="";return o+=t.getDate()<10?"0"+t.getDate()+"/":t.getDate()+"/",o+=t.getMonth()+1<10?"0"+(t.getMonth()+1)+"/":t.getMonth()+1+"/",o+=t.getFullYear()},this.abrirConfirmacaoExclusaoDe=function(e){var o=this,r=t.confirm().title("Excluir oferta?").textContent("Essa ação não pode ser desfeita.").ok("Excluir").cancel("Cancelar");this.oferta=angular.copy(e),t.show(r).then(function(){o.confirmarExclusao(e.id)}).catch(function(){})},this.listarMeusProdutos=function(){var e=this;return i.listarMeusProdutos().then(function(t){e.ofertas=t})},this.confirmarExclusao=function(e){var t=this;return i.deletarOferta(e).then(function(){t.listarMeusProdutos()})}}angular.module("app").controller("MeusProdutosController",e),e.$inject=["$rootScope","$mdDialog","CategoriaProdutoService","ProdutoService","UsuarioProdutoService","produtos","ofertas"]}(),function(){function e(e,t,o,r,i,n){e.$on("$routeChangeStart",function(e,i,n){i.requireAuth&&!r.get("session")?(t.url("/"),e.preventDefault()):o.defaults.headers.common.Authorization=r.get("session")}),e.sidenav={visible:!1,toggle:function(){i("main_menu").toggle()},items:[{name:"Produtos",icon:"shopping_basket",href:"#/meus-produtos"}]},e.showToast=function(e){return n.show({template:'<md-toast><div class="md-toast-content">'+e+"</div></md-toast>",hideDelay:3e3,parent:document.getElementsByTagName("body")[0]})}}angular.module("app").run(e),e.$inject=["$rootScope","$location","$http","$cookies","$mdSidenav","$mdToast"]}(),function(){function e(e){e.hashPrefix(""),e.html5Mode({enabled:!1})}angular.module("app").config(e),e.$inject=["$locationProvider"]}(),function(){function e(e){return e.when("/",{controller:"InicioController",controllerAs:"loginCtrl",templateUrl:"/views/inicio"}).when("/registro/perfil",{controller:"CadastroPerfilController",controllerAs:"cadastroCtrl",templateUrl:"/views/cadastro/perfil"}).when("/registro/credencial",{controller:"CadastroCredencialController",controllerAs:"cadastroCtrl",templateUrl:"/views/cadastro/credencial"}).when("/registro/pessoa-fisica",{controller:"CadastroPessoaFisicaController",controllerAs:"cadastroCtrl",templateUrl:"/views/cadastro/pessoa-fisica"}).when("/registro/pessoa-juridica",{controller:"CadastroPessoaJuridicaController",controllerAs:"cadastroCtrl",templateUrl:"/views/cadastro/pessoa-juridica"}).when("/registro/contato",{controller:"CadastroContatoController",controllerAs:"cadastroCtrl",templateUrl:"/views/cadastro/contato"}).when("/meus-produtos",{controller:"MeusProdutosController",controllerAs:"meusProdutosCtrl",templateUrl:"/views/meus-produtos",requireAuth:!0,resolve:{produtos:["ProdutoService",function(e){return e.listarTodos()}],ofertas:["UsuarioProdutoService",function(e){return e.listarMeusProdutos()}]}}).otherwise({redirectTo:"/"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){function e(e){e.theme("agro").primaryPalette("green").accentPalette("lime"),e.setDefaultTheme("agro")}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}();