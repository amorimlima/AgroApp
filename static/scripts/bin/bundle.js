!function(){var e=["ngAnimate","ngAria","ngCookies","ngMaterial","ngRoute","ngMessages"];angular.module("app",e)}(),function(){function e(e,t){this.cadastrar=function(t){return e.post("/autenticacao/cadastrar",t).then(function(e){return Promise.resolve(e.data)})},this.autenticar=function(t,o){return e.post("/autenticacao",{email:t,senha:o}).then(function(e){return Promise.resolve({token:e.data.token,status:e.status})})}}angular.module("app").service("AutenticacaoService",e),e.$inject=["$http","$cookies"]}(),function(){function e(e){this.getAll=function(){return e.get("/categoria").then(function(e){return e.data})}}angular.module("app").service("CategoriaProdutoService",e),e.$inject=["$http"]}(),function(){function e(e){this.listarPorEndereco=function(t){return e.get("/email/"+t).then(function(e){return Promise.resolve(e.data)}).catch(function(e){return Promise.reject({mensagem:"Erro inesperado"})})}}angular.module("app").service("EmailService",e),e.$inject=["$http"]}(),function(){function e(e){this.listarEstados=function(){return e.get("/endereco/estado").then(function(e){return Promise.resolve(e.data)})}}angular.module("app").service("EnderecoService",e),e.$inject=["$http"]}(),function(){function e(e){this.getAvailable=function(){return e.get("/perfil/disponivel").then(function(e){return e.data})}}angular.module("app").service("PerfilService",e),e.$inject=["$http"]}(),function(){function e(e){this.getSessionItem=function(t){return"sessionStorage"in window?sessionStorage.getItem(t):e.get(t)},this.setSessionItem=function(t,o){if("string"!=typeof t||"object"==typeof o)throw new TypeError("Params must not be complex structures");return"sessionStorage"in window?sessionStorage.setItem(t,o):e.put(t,o)},this.removeSessionItem=function(t){return"sessionStorage"in window?sessionStorage.removeItem(t):e.remove(t)},this.clearSessionItems=function(){return"sessionStorage"in window&&sessionStorage.clear()},this.getPreference=function(t){return"localStorage"in window?localStorage.getItem(t):e.get(t)},this.setPreference=function(t,o){if("string"!=typeof t||"object"==typeof o)throw new TypeError("Params must not be complex structures");return"localStorage"in window?localStorage.setItem(t,o):e.put(t,o,{expires:new Date(2021,11,31)})},this.removePreference=function(t){return"localStorage"in window?localStorage.removeItem(t):e.remove(t)}}angular.module("app").service("PersistenceService",e),e.$inject=["$cookies"]}(),function(){function e(e){this.listarPorCpf=function(t){return e.get("/pessoa-fisica/"+t).then(function(e){return Promise.resolve(e.data)})}}angular.module("app").service("PessoaFisicaService",e),e.$inject=["$http"]}(),function(){function e(e){this.listarPorCnpj=function(t){return e.get("/pessoa-juridica/"+t).then(function(e){return Promise.resolve(e.data)})}}angular.module("app").service("PessoaJuridicaService",e),e.$inject=["$http"]}(),function(){function e(e){this.listarTodos=function(){return e.get("/produto").then(function(e){return Promise.resolve(e.data)})}}angular.module("app").service("ProdutoService",e),e.$inject=["$http"]}(),function(){function e(e){this.register=function(t){return e.post("/usuario/novo",t).then(function(e){return e.data})}}angular.module("app").service("UsuarioService",e),e.$inject=["$http"]}(),function(){function e(e,t){this.listarMeusProdutos=function(){return e.get("/oferta/meus-produtos").then(function(e){return Promise.resolve(e.data)})},this.cadastrarOferta=function(t){return e.post("/oferta",t).then(function(e){return Promise.resolve(e.data)})},this.deletarOferta=function(t){return e.delete("/oferta/"+t).then(function(e){return Promise.resolve(e.data)})}}e.$inject=["$http","PersistenceService"],angular.module("app").service("UsuarioProdutoService",e)}(),function(){function e(e,t,o){this.viewState="filter",this.resultViewState="list",this.categorias=t||[],this.estados=o||[],this.filtros={categoria:{}},this.listaResultados=[],this.setViewState=function(e){this.viewState=e},this.setResultViewState=function(e){this.resultViewState=e}}angular.module("app").controller("BuscaController",e),e.$inject=["$rootScope","categorias","estados"]}(),function(){function e(e,t,o,r,n,i,a){var s=this;s.estados=a,s.usuario=JSON.parse(n.getSessionItem("usuario"))||t.url("/registro/perfil"),s.endereco=JSON.parse(n.getSessionItem("endereco"))||{cep:"",logradouro:"",numero:null,complemento:"",bairro:"",cidade:"",estado:""},s.telefone=JSON.parse(n.getSessionItem("telefone"))||{Tipo:null,ddd:null,numero:null},s.loading=!1,s.cepPattern=/\d{8}/,s.dddPattern=/\d{2}/,s.telPattern=/(\d{8}|\d{9})/,s.voltar=function(){return"PF"===s.usuario.tipo?t.url("/registro/pessoa-fisica"):t.url("/registro/pessoa-juridica")},s.avancar=function(){return n.setSessionItem("endereco",JSON.stringify(s.endereco)),n.setSessionItem("telefone",JSON.stringify(s.telefone)),r.show({contentElement:document.getElementById("terms_of_use_dialog"),parent:document.getElementsByTagName("body")[0]})},s.cadastrar=function(){JSON.parse(n.getSessionItem("credencial"));var e=JSON.parse(n.getSessionItem("pessoa_fisica")),a=JSON.parse(n.getSessionItem("pessoa_juridica")),u=JSON.parse(n.getSessionItem("email")),c=s.endereco,l=s.telefone,d=s.usuario;return r.hide(),s.loading=!0,d.Emails=[u],d.Enderecos=[c],d.Telefones=[l],"PF"===s.usuario.tipo?(e.data_nascimento=new Date(e.data_nascimento).toISOString().split("T")[0],d.PessoaFisica=e):(a.data_fundacao=new Date(a.data_fundacao).toISOString().split("T")[0],d.PessoaJuridica=a),i.cadastrar(d).then(function(e){return i.autenticar(u.email,d.senha)}).then(function(e){return o.put("session",e.token),t.url("/meus-produtos")})},s.cancelar=function(){return r.hide()}}angular.module("app").controller("CadastroContatoController",e),e.$inject=["$rootScope","$location","$cookies","$mdDialog","PersistenceService","AutenticacaoService","estados"]}(),function(){function e(e,t,o,r){var n=this;n.usuario=JSON.parse(o.getSessionItem("usuario"))||t.url("/registro/perfil"),n.email=JSON.parse(o.getSessionItem("email"))||{email:""},n.emailEmUso=!1,n.voltar=function(){return t.url("/registro/perfil")},n.setForm=function(e){n.form=e},n.verificarEmail=function(e){r.listarPorEndereco(e.$modelValue).then(function(t){t?(e.$error.em_uso=!0,e.$valid=!1,e.$invalid=!0):(e.$error.em_uso=!1,e.$valid=!0,e.$invalid=!1)})},n.avancar=function(e){return o.setSessionItem("usuario",JSON.stringify(this.usuario)),o.setSessionItem("email",JSON.stringify(this.email)),t.url("/registro/"+e)}}angular.module("app").controller("CadastroCredencialController",e),e.$inject=["$rootScope","$location","PersistenceService","EmailService"]}(),function(){function e(e,t,o){this.usuario=JSON.parse(o.getSessionItem("usuario"))||{tipo:"",senha:"",Perfil:null},this.voltar=function(){return o.clearSessionItems(),t.url("/")},this.avancar=function(){return o.setSessionItem("usuario",JSON.stringify(this.usuario)),t.url("/registro/credencial")}}angular.module("app").controller("CadastroPerfilController",e),e.$inject=["$rootScope","$location","PersistenceService"]}(),function(){function e(e,t,o,r){var n=this;n.usuario=JSON.parse(o.getSessionItem("usuario"))||t.url("/registro/perfil"),n.pessoa_fisica=JSON.parse(o.getSessionItem("pessoa_fisica"))||{cpf:"",rg:"",nome:"",sobrenome:"",data_nascimento:new Date("1988-00-01")},n.data_nascimento=new Date(n.pessoa_fisica.data_nascimento),n.cpfPattern=/\d{11}/,n.voltar=function(){return t.url("/registro/credencial")},n.avancar=function(){return n.pessoa_fisica.data_nascimento=n.data_nascimento.toISOString(),o.removeSessionItem("pessoa_juridica"),o.setSessionItem("pessoa_fisica",JSON.stringify(n.pessoa_fisica)),t.url("/registro/contato")},n.verificarCpf=function(e){return r.listarPorCpf(e.$modelValue).then(function(t){t?(e.$error.em_uso=!0,e.$valid=!1,e.$invalid=!0):(e.$error.em_uso=!1,e.$valid=!0,e.$invalid=!1)})}}angular.module("app").controller("CadastroPessoaFisicaController",e),e.$inject=["$rootScope","$location","PersistenceService","PessoaFisicaService"]}(),function(){function e(e,t,o,r){var n=this;n.usuario=JSON.parse(o.getSessionItem("usuario"))||t.url("/registro/perfil"),n.pessoa_juridica=JSON.parse(o.getSessionItem("pessoa_juridica"))||{cnpj:"",razao_social:"",responsavel:"",data_fundacao:new Date("1991-00-01")},n.data_fundacao=new Date(n.pessoa_juridica.data_fundacao),n.cnpjPattern=/\d{14}/,n.voltar=function(){return t.url("/registro/credencial")},n.avancar=function(){return n.pessoa_juridica.data_fundacao=n.data_fundacao.toISOString(),o.removeSessionItem("pessoa_fisica"),o.setSessionItem("pessoa_juridica",JSON.stringify(n.pessoa_juridica)),t.url("/registro/contato")},n.verificarCnpj=function(e){return r.listarPorCnpj(e.$modelValue).then(function(t){t?(e.$error.em_uso=!0,e.$valid=!1,e.$invalid=!0):(e.$error.em_uso=!1,e.$valid=!0,e.$invalid=!1)})}}angular.module("app").controller("CadastroPessoaJuridicaController",e),e.$inject=["$rootScope","$location","PersistenceService","PessoaJuridicaService"]}(),function(){function e(e,t,o,r,n){this.email="",this.senha="",this.login=function(){r.autenticar(this.email,this.senha).then(function(e){return o.put("session",e.token),t.url("/meus-produtos")}).catch(function(){e.showToast("Usuário ou senha inválidos")})}}angular.module("app").controller("InicioController",e),e.$inject=["$rootScope","$location","$cookies","AutenticacaoService","PersistenceService"]}(),function(){function e(e,t,o,r,n,i,a){this.oferta={},this.ofertas=a,this.produtosDisponiveis=i,this.categoria=null,this.textoBusca="",this.mensagemStatus="Nenhum produto encontrado.",this.abrirFormulario=function(e){e?(this.oferta=angular.copy(e),this.categoria=e.Anuncio.Categoria,this.oferta.data_inicio=new Date(this.oferta.data_inicio),this.oferta.data_fim=new Date(this.oferta.data_fim)):(this.oferta={},this.categoria=null),t.show({contentElement:document.getElementById("produto_form"),parent:document.getElementsByTagName("body")[0]})},this.produtosFiltrados=function(e){return e?this.produtosDisponiveis.filter(function(t){return t.Categoria===e}):[{id:null,nome:"Selecione uma categoria"}]},this.cancelar=function(){return this.produto={},t.hide()},this.salvar=function(){var e=this;return this.ofertas=[],n.cadastrarOferta(this.oferta).then(function(o){t.hide(),e.listarMeusProdutos()})},this.produtosPorCategoria=function(e){return this.produtosDisponiveis.filter(function(t){return t.Categoria===e})},this.getFormatedDate=function(e){var t=new Date(e),o="";return o+=t.getDate()<10?"0"+t.getDate()+"/":t.getDate()+"/",o+=t.getMonth()+1<10?"0"+(t.getMonth()+1)+"/":t.getMonth()+1+"/",o+=t.getFullYear()},this.abrirConfirmacaoExclusaoDe=function(e){var o=this,r=t.confirm().title("Excluir oferta?").textContent("Essa ação não pode ser desfeita.").ok("Excluir").cancel("Cancelar");this.oferta=angular.copy(e),t.show(r).then(function(){o.confirmarExclusao(e.id)}).catch(function(){})},this.listarMeusProdutos=function(){var e=this;return n.listarMeusProdutos().then(function(t){e.ofertas=t})},this.confirmarExclusao=function(e){var t=this;return n.deletarOferta(e).then(function(){t.listarMeusProdutos()})}}angular.module("app").controller("MeusProdutosController",e),e.$inject=["$rootScope","$mdDialog","CategoriaProdutoService","ProdutoService","UsuarioProdutoService","produtos","ofertas"]}(),function(){function e(e,t,o,r,n,i){e.$on("$routeChangeStart",function(e,n,i){n.requireAuth&&!r.get("session")?(t.url("/"),e.preventDefault()):o.defaults.headers.common.Authorization=r.get("session")}),e.sidenav={visible:!1,toggle:function(){n("main_menu").toggle()},items:[{name:"Produtos",icon:"shopping_basket",href:"#/meus-produtos"},{name:"Busca",icon:"search",href:"#/busca"}]},e.showToast=function(e,t){return i.show({template:'<md-toast><div class="md-toast-content">'+e+"</div></md-toast>",hideDelay:t||1500,parent:document.getElementsByTagName("body")[0]})}}angular.module("app").run(e),e.$inject=["$rootScope","$location","$http","$cookies","$mdSidenav","$mdToast"]}(),function(){function e(e){e.hashPrefix(""),e.html5Mode({enabled:!1})}angular.module("app").config(e),e.$inject=["$locationProvider"]}(),function(){function e(e){return e.when("/",{controller:"InicioController",controllerAs:"loginCtrl",templateUrl:"/views/inicio"}).when("/registro/perfil",{controller:"CadastroPerfilController",controllerAs:"cadastroCtrl",templateUrl:"/views/cadastro/perfil"}).when("/registro/credencial",{controller:"CadastroCredencialController",controllerAs:"ctrl",templateUrl:"/views/cadastro/credencial"}).when("/registro/pessoa-fisica",{controller:"CadastroPessoaFisicaController",controllerAs:"ctrl",templateUrl:"/views/cadastro/pessoa-fisica"}).when("/registro/pessoa-juridica",{controller:"CadastroPessoaJuridicaController",controllerAs:"ctrl",templateUrl:"/views/cadastro/pessoa-juridica"}).when("/registro/contato",{controller:"CadastroContatoController",controllerAs:"ctrl",templateUrl:"/views/cadastro/contato",resolve:{estados:["EnderecoService",function(e){return e.listarEstados()}]}}).when("/meus-produtos",{controller:"MeusProdutosController",controllerAs:"meusProdutosCtrl",templateUrl:"/views/meus-produtos",requireAuth:!0,resolve:{produtos:["ProdutoService",function(e){return e.listarTodos()}],ofertas:["UsuarioProdutoService",function(e){return e.listarMeusProdutos()}]}}).when("/busca",{controller:"BuscaController",controllerAs:"buscaCtrl",templateUrl:"/views/busca",requireAuth:!0,resolve:{categorias:["CategoriaProdutoService",function(e){return e.getAll()}],estados:["EnderecoService",function(e){return e.listarEstados()}]}}).otherwise({redirectTo:"/"})}angular.module("app").config(e),e.$inject=["$routeProvider"]}(),function(){function e(e){e.theme("agro").primaryPalette("green").accentPalette("lime"),e.setDefaultTheme("agro")}angular.module("app").config(e),e.$inject=["$mdThemingProvider"]}();